<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>通过ws来实现股票的不断刷新</title>
		<link rel="stylesheet" href="css/bootstrap.min.css" />
		<script src='js/jquery-1.11.1.min.js'></script>
		<style>
			.controller {
				margin-top: 20px;
				margin-bottom: 30px;
			}
		</style>
	</head>

	<body>
		<div id="app">
			<div class="container">
				<h3>股票的及时反馈</h3>
				<div class="controller">
					<button class='begin btn btn-info'>开始</button>
					<button class='edit btn btn-danger'>停止</button>
				</div>
				<table class='table table-responsive table-bordered'>
					<thead>
						<tr>
							<td>股票名字</td>
							<td>股票价格</td>
						</tr>
					</thead>
					<tbody>
						<tr >
							<td>恒大绿洲</td>
							<td><button class='btn btn-danger'><span id='biggreen'>40</span></button></td>
						</tr>
						<tr >
							<td>万达广场</td>
							<td><button class='btn btn-danger'><span>100</span></button></td>
						</tr>
						<tr >
							<td>胖东来</td>
							<td><button class='btn btn-danger'><span>300</span></button></td>
						</tr>
						<tr >
							<td>全家</td>
							<td><button class='btn btn-danger'><span>500</span></button></td>
						</tr>
						<tr >
							<td>沃尔玛</td>
							<td><button class='btn btn-danger'><span>600</span></button></td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>

	</body>
	<script>
		var ws=new WebSocket('ws://localhost:8085'); //创建示例
		
			ws.open=function(e){
					console.log("我们握手成功了");
					console.log("getworld")
				};
			//一开始先建立连接
			$(".begin").click(function(){
				//给服务器发送消息 连接服务器
				ws.send('hello world');
				console.log("点击事件")
				
			})
			//点击发送信息，然后服务器收到信息
			ws.onmessage=function(e){
				console.log(e.data)
			}
			$('.edit').click(function(){
				ws.close=function(e){
					console.log("我们断开连接了");
				}
				//断开连接
			})
			//点击断开信息
			
	</script>

</html>